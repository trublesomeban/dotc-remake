[gd_scene load_steps=16 format=3 uid="uid://cy6ls82x230v2"]

[ext_resource type="NavigationPolygon" uid="uid://cjx77rw5mfpj4" path="res://scenes/lighthouse_top_nav.tres" id="1_q15a3"]
[ext_resource type="Script" path="res://NavMap.gd" id="2_cabaj"]
[ext_resource type="TileSet" uid="uid://byctvs7humn1g" path="res://scenes/colliders.tres" id="3_i7eqo"]
[ext_resource type="TileSet" uid="uid://cele46gl32emm" path="res://scenes/shores.tres" id="4_dtncq"]
[ext_resource type="Script" path="res://scenes/LevelOverlay.gd" id="5_ob331"]
[ext_resource type="Script" path="res://scenes/OverlayDetection.gd" id="6_s17jh"]
[ext_resource type="PackedScene" uid="uid://cu2v8sdehobcu" path="res://scenes/player.tscn" id="7_scre8"]
[ext_resource type="Texture2D" uid="uid://d3p2veh2mkl87" path="res://assets/backgrounds/lighthouse_bg.png" id="8_ec1f1"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sasrh"]
size = Vector2(176, 208)

[sub_resource type="Animation" id="Animation_qqvq1"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:self_modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_fmhpy"]
resource_name = "fade_in"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.470588), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_dj1k5"]
resource_name = "fade_in_more"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0.0784314), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_wqx20"]
resource_name = "fade_out"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.470588)]
}

[sub_resource type="Animation" id="Animation_n2tji"]
resource_name = "fade_out_more"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0.0784314)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_8ijmr"]
_data = {
"RESET": SubResource("Animation_qqvq1"),
"fade_in": SubResource("Animation_fmhpy"),
"fade_in_more": SubResource("Animation_dj1k5"),
"fade_out": SubResource("Animation_wqx20"),
"fade_out_more": SubResource("Animation_n2tji")
}

[node name="LighthousePeak" type="Node2D"]

[node name="NavMap" type="NavigationRegion2D" parent="."]
z_index = 112
navigation_polygon = ExtResource("1_q15a3")
navigation_layers = 8
script = ExtResource("2_cabaj")

[node name="LevelCollision" type="Node2D" parent="NavMap"]
modulate = Color(1, 1, 1, 0.470588)
self_modulate = Color(1, 1, 1, 0.470588)

[node name="Pits" type="TileMap" parent="NavMap/LevelCollision"]
z_index = 100
tile_set = ExtResource("3_i7eqo")
format = 2

[node name="Walls" type="TileMap" parent="NavMap/LevelCollision"]
z_index = 100
tile_set = ExtResource("3_i7eqo")
format = 2

[node name="Art" type="Node2D" parent="."]
position = Vector2(420, 694)

[node name="LevelOverlay" type="TileMap" parent="Art"]
z_index = 8
tile_set = ExtResource("4_dtncq")
format = 2
script = ExtResource("5_ob331")
metadata/_edit_group_ = true

[node name="Area2D" type="Area2D" parent="Art/LevelOverlay"]
position = Vector2(983, -440)
script = ExtResource("6_s17jh")

[node name="Collider1" type="CollisionShape2D" parent="Art/LevelOverlay/Area2D"]
position = Vector2(1, 0)
shape = SubResource("RectangleShape2D_sasrh")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Art/LevelOverlay"]
libraries = {
"": SubResource("AnimationLibrary_8ijmr")
}

[node name="Dec2" type="TileMap" parent="Art"]
z_index = 3
tile_set = ExtResource("4_dtncq")
format = 2

[node name="Bridges" type="TileMap" parent="Art"]
z_index = 2
tile_set = ExtResource("4_dtncq")
format = 2

[node name="Dec1" type="TileMap" parent="Art"]
z_index = 1
tile_set = ExtResource("4_dtncq")
format = 2
layer_0/tile_data = PackedInt32Array(-2228225, 1048577, 4, -2293760, 1114113, 4)

[node name="Level" type="TileMap" parent="Art"]
tile_set = ExtResource("4_dtncq")
format = 2
layer_0/tile_data = PackedInt32Array(-2293758, 851969, 0, -2228222, 851969, 0, -2293757, 851969, 0, -2228221, 851969, 0, -2293756, 851969, 0, -2228220, 851969, 0, -2293755, 851969, 0, -2228219, 851969, 0, -2293754, 851969, 0, -2228218, 851969, 0, -2293753, 851969, 0, -2228217, 851969, 0, -2162687, 786433, 0, -2162686, 851969, 0, -2162685, 851969, 0, -2162684, 851969, 0, -2162683, 851969, 0, -2162682, 851969, 0, -2162681, 851969, 0, -2359294, 1048577, 0, -2359293, 1048577, 0, -2359292, 1048577, 0, -2359291, 1048577, 0, -2359290, 1048577, 0, -2359289, 1048577, 0, -2359295, 1048577, 0, -2293759, 786433, 0, -2228223, 786433, 0, -1638401, 1048577, 5, -1703937, 1048577, 5, -1769473, 1048577, 5, -1835009, 1048577, 5, -1900545, 1048577, 5, -1966081, 1048577, 5, -2031617, 1048577, 5, -2097153, 1048577, 5, -2162689, 1048577, 5, -1703936, 1114113, 5, -1769472, 1114113, 5, -1835008, 1114113, 5, -1900544, 1114113, 5, -1966080, 1114113, 5, -2031616, 1114113, 5, -2097152, 1114113, 5, -2162688, 1114113, 5, -2228224, 1114113, 5, -2293761, 983041, 0, -2359296, 1048577, 0, -2228225, 786433, 0, -2293760, 851969, 0, -2359288, 1048577, 0, -2293752, 851969, 0, -2228216, 851969, 0, -2162680, 851969, 0, -2359287, 1048577, 0, -2293751, 851969, 0, -2228215, 851969, 0, -2162679, 851969, 0, -2031615, 983041, 1, -1966079, 1114113, 2, -1900543, 1114113, 2, -1835007, 1114113, 2, -1769471, 1114113, 2, -2031614, 1048577, 1, -1966078, 1179649, 2, -1900542, 1179649, 2, -1835006, 1179649, 2, -1769470, 1179649, 2, -2031613, 1048577, 1, -1966077, 1179649, 2, -1900541, 1179649, 2, -1835005, 1179649, 2, -1769469, 1179649, 2, -2031612, 1048577, 1, -1966076, 1179649, 2, -1900540, 1179649, 2, -1835004, 1179649, 2, -1769468, 1179649, 2, -2031611, 1048577, 1, -1966075, 1179649, 2, -1900539, 1179649, 2, -1835003, 1179649, 2, -1769467, 1179649, 2, -2031610, 1048577, 1, -1966074, 1179649, 2, -1900538, 1179649, 2, -1835002, 1179649, 2, -1769466, 1179649, 2, -2031609, 1048577, 1, -1966073, 1179649, 2, -1900537, 1179649, 2, -1835001, 1179649, 2, -1769465, 1179649, 2, -2031608, 1048577, 1, -1966072, 1179649, 2, -1900536, 1179649, 2, -1835000, 1179649, 2, -1769464, 1179649, 2, -2031607, 1048577, 1, -1966071, 1179649, 2, -1900535, 1179649, 2, -1834999, 1179649, 2, -1769463, 1179649, 2, -1703935, 1114113, 2, -1703934, 1179649, 2, -1703933, 1179649, 2, -1703932, 1179649, 2, -1703931, 1179649, 2, -1703930, 1179649, 2, -1703929, 1179649, 2, -1703928, 1179649, 2, -1703927, 1179649, 2, -2031606, 1114113, 1, -1966070, 1179649, 2, -1900534, 1245185, 2, -1834998, 1245185, 2, -1769462, 1179649, 2, -1703926, 1245185, 2, -2359286, 1114113, 0, -2293750, 917505, 0, -2228214, 917505, 0, -2162678, 917505, 0, -2097151, 786433, 0, -2097142, 917505, 0, -2097143, 851969, 0, -2097144, 851969, 0, -2097145, 851969, 0, -2097146, 851969, 0, -2097147, 851969, 0, -2097148, 851969, 0, -2097149, 851969, 0, -2097150, 851969, 0, -1572865, 1572865, 0, -1638400, 1638401, 0, -1638399, 1638401, 0, -1638398, 1638401, 0, -1638397, 1638401, 0, -1638396, 1638401, 0, -1638395, 1638401, 0, -1638394, 1638401, 0, -1638393, 1638401, 0, -1638392, 1638401, 0, -1638391, 1638401, 0, -1638390, 1703937, 0, -1572854, 1703937, 2, -1572855, 1638401, 2, -1572856, 1638401, 2, -1572857, 1638401, 2, -1572858, 1638401, 2, -1572859, 1638401, 2, -1572860, 1638401, 2, -1572861, 1638401, 2, -1572862, 1638401, 2, -1572863, 1638401, 2, -1572864, 1638401, 2, -1507329, 1572865, 2)

[node name="Player" parent="." instance=ExtResource("7_scre8")]
position = Vector2(539, 186)
gravity_scale = 0.0

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
scroll_offset = Vector2(0, 1)
scroll_base_scale = Vector2(4, 4)
scroll_limit_begin = Vector2(0, -200)
scroll_limit_end = Vector2(0, 100)
scroll_ignore_camera_zoom = true

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
position = Vector2(1764, -113)
scale = Vector2(2.9, 2)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
scale = Vector2(4, 4)
texture = ExtResource("8_ec1f1")

[connection signal="player_end_overlapping_o" from="Art/LevelOverlay/Area2D" to="Art/LevelOverlay" method="_on_player_end_overlapping_o"]
[connection signal="player_start_overlapping_o" from="Art/LevelOverlay/Area2D" to="Art/LevelOverlay" method="_on_player_start_overlapping_o"]
